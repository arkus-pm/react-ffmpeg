(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{216:function(e,t,n){e.exports=n(284)},218:function(e,t,n){},240:function(e,t,n){},264:function(e,t){},266:function(e,t){},284:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=(n(218),n(13)),l=n(21),i=n.n(l),c=n(31),u=n(65),s=n(7),d=n(147),f=(n(240),n(363)),m=n(356),p=n(365),v=n(294),b=n(372),g=n(371),h=n(367),w=(n(241),n(179)),y=n(358),E=n(353),j=n(176),O=n.n(j),x=n(297),P=n(177),k=n.n(P),S=n(178),C=n.n(S),F=function(e){var t=e.audio,n=Object(a.useRef)(),o=Object(a.useRef)({isPlaying:function(){return!1}}),l=Object(a.useState)(!1),i=Object(s.a)(l,2),c=i[0],u=i[1];return Object(a.useEffect)((function(){var e=O.a.create({container:n.current,fillParent:!1,height:50,width:200,barWidth:2,barHeight:2,cursorWidth:1});return e.loadBlob(t),e.on("ready",(function(){o.current=e,e.seekTo(1)})),function(){e.destroy()}}),[t]),r.a.createElement(f.a,{container:!0},r.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"row"}},r.a.createElement(x.a,{onClick:function(){o.current.playPause(),u(o.current.isPlaying()),o.current.on("finish",(function(){u(o.current.isPlaying())}))},color:"primary"},c?r.a.createElement(k.a,null):r.a.createElement(C.a,null)),r.a.createElement("div",{style:{width:"100%"},ref:n})))},N=n(9);Object(N.a)("div")((function(e){var t=e.theme;return{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%","& .ant-empty-img-1":{fill:"light"===t.palette.mode?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:"light"===t.palette.mode?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:"light"===t.palette.mode?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:"light"===t.palette.mode?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:"light"===t.palette.mode?"0.8":"0.08",fill:"light"===t.palette.mode?"#f5f5f5":"#fff"}}}));var R=n(185),A=n.n(R),I=n(184),W=n.n(I),D=n(364),L=function(e){return a.createElement("div",{style:{padding:"0 2em 0 2em"}},a.createElement("div",{style:{float:"right",display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"}},a.createElement(w.a,null)," ",a.createElement(y.a,e)))};function B(e){var t=e.rows,n=e.progress,r=e.onSelectionModelChange,o=[{field:"id",headerName:"ID",flex:1,hide:!0},{headerName:"Parent Folder",sortable:!0,flex:1,valueGetter:function(e){return e.row.relativePath.split("/").slice(-2,-1)||""}},{field:"fileName",headerName:"FileName",sortable:!0,flex:1},{field:"relativePath",headerName:"Path",sortable:!0,flex:1,hide:!0},{field:"type",headerName:"Type",flex:1},{field:"duration",headerName:"Duration",flex:1,sortable:!0,type:"number",valueGetter:function(e){return e.row.metadata.duration},valueFormatter:function(e){return null==e.value?"loading...":"".concat(e.value.toFixed(2),"s")},renderCell:function(e){return null==e.row.metadata.duration?a.createElement(g.a,null):"".concat(e.row.metadata.duration.toFixed(2),"s")}},{field:"waveform",headerName:"Waveform",flex:1,sortable:!1,renderCell:function(e){return a.createElement(F,{audio:e.row.file})}},{field:"difference",headerName:"Difference",flex:1,valueGetter:function(e){var t,n,a;if(1==(null===(t=e.row.processed)||void 0===t?void 0:t.loaded))return(null===(n=e.row.processed)||void 0===n||null===(a=n.result)||void 0===a?void 0:a.metadata.duration)-e.row.metadata.duration},renderCell:function(e){var t,n,r=(null===(t=e.row.processed)||void 0===t||null===(n=t.result)||void 0===n?void 0:n.metadata.duration)-e.row.metadata.duration;if(r){var o=function(){return r>0?a.createElement(W.a,null):a.createElement(A.a,null)};return a.createElement(D.a,{sx:{paddingLeft:"10px"},icon:a.createElement(o,{style:{paddingLeft:"2px"}}),variant:"outlined",color:r>0?"error":"success",label:r.toFixed(2)+"s"})}}},{field:"processedDuration",headerName:"Pr. Duration",flex:1,sortable:!0,type:"number",valueGetter:function(e){var t,n;return(null===(t=e.row.processed)||void 0===t||null===(n=t.result)||void 0===n?void 0:n.metadata.duration)||null},valueFormatter:function(e){var t;if(null===(t=e.row)||void 0===t?void 0:t.processed)return null==e.value?"loading...":"".concat(e.value.toFixed(2),"s")},renderCell:function(e){var t;if(e.row.processed)return e.row.processed.loaded?"".concat(null===(t=e.row.processed)||void 0===t?void 0:t.result.metadata.duration.toFixed(2),"s"):e.row.processed.progress?a.createElement(g.a,{variant:"determinate",value:n}):a.createElement(g.a,null)}},{field:"processedFile",headerName:"Processed",flex:1,sortable:!1,renderCell:function(e){if(e.row.processed)return e.row.processed.loaded?a.createElement("div",null,a.createElement(F,{audio:e.row.processed.result.file})):e.row.processed.progress?a.createElement(g.a,{variant:"determinate",value:n}):a.createElement(g.a,null)}}];return a.createElement(h.a,{sx:{width:"100%"}},a.createElement(E.a,{components:{Toolbar:L},autoHeight:!0,rows:t,columns:o,pageSize:100,rowsPerPageOptions:[5],checkboxSelection:!0,disableSelectionOnClick:!0,onSelectionModelChange:r}))}var U=n(357),M=n(366),T=n(361),G=n(369),H=n(349);function q(e){var t=e.label,n=e.options,r=e.changeHandler,o=e.selected;return a.createElement(G.a,null,a.createElement(H.a,{id:"demo-radio-buttons-group-label"},t),a.createElement(M.a,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:o,name:"radio-buttons-group",onChange:r,row:!0,value:o},n.map((function(e,t){var n=e.label;return a.createElement(T.a,{value:t,control:a.createElement(U.a,null),label:n})}))))}var z=n(148),J=n.n(z),$=(n(252),n(186)),V=n.n($),K=n(187);var Q=function(){var e,t=Object(a.useState)(""),n=Object(s.a)(t,2),l=(n[0],n[1],Object(a.useState)(0)),g=Object(s.a)(l,2),h=g[0],w=g[1],y=Object(a.useState)(0),E=Object(s.a)(y,2),j=E[0],O=E[1],x=Object(a.useState)({rows:[]}),P=Object(s.a)(x,2),k=P[0],S=P[1],C=Object(a.useState)({rows:[]}),F=Object(s.a)(C,2),N=F[0],R=F[1];k&&!(null===(e=k.rows)||void 0===e?void 0:e.length)&&J.a.getItem("initial-data").then((function(e){e&&S(e)}));var A=function(e){e=H(Object(u.a)({},e)),S(e),J.a.setItem("initial-data",e)},I=function(e){!function(e){var t=G(e);S(t),console.log(t),Promise.all(t.rows.map((function(e){return e.metadata}))).then((function(e){e.forEach((function(e){t[e.fileId].metadata=e})),A(t),console.log("promise resolved",t)}))}(Array.from(e.target.files))},W=Object(a.useState)("Select file & click start"),D=Object(s.a)(W,2),L=(D[0],D[1],Object(d.createFFmpeg)({log:!1,logger:function(e){e.type,e.message}})),U=function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=Object(u.a)({},k),n=Object(u.a)({},N),a=0;a<n.rows.length;)t[n.rows[a].id].processed={loaded:!1,progress:0},a++;S(Object(u.a)({},t)),r=0;case 5:if(!(r<n.rows.length)){e.next=17;break}return t[n.rows[r].id].processed={loaded:!1,progress:!0},S(Object(u.a)({},t)),e.next=10,M(n.rows[r]);case 10:o=e.sent,t[n.rows[r].id].processed={result:o,loaded:!0},S(Object(u.a)({},t)),O((r+1)/n.rows.length*100),r++;case 15:e.next=5;break;case 17:O(0),A(Object(u.a)({},t)),console.log(t);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,r,l,c,s,f,m,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,console.log("Loading ffmpeg-core.js"),L.isLoaded()){e.next=6;break}return e.next=5,L.load();case 5:L.FS("mkdir","processed");case 6:return w(100*(a=0)),L.setProgress((function(e){var t=e.ratio;t>a&&(w(100*(a=t)),console.log(a))})),console.log("Start transcoding"),l=(r=function(e){return{innerPath:encodeURIComponent(e),outerPath:e}})(n.id),c=r("".concat("/processed","/").concat(n.id.replace(/\.[0-9a-z]+$/,re))),console.log(l.innerPath),e.t0=L,e.t1=l.innerPath,e.next=19,Object(d.fetchFile)(n.file);case 19:return e.t2=e.sent,e.t0.FS.call(e.t0,"writeFile",e.t1,e.t2),s="-i ".concat(l.innerPath," ").concat(ee," ").concat(X," ").concat(c.innerPath),e.next=24,L.run.apply(L,Object(o.a)(s.split(" ")));case 24:return e.next=26,L.FS("readFile",c.innerPath);case 26:return f=e.sent,m=new File([f.buffer],c.outerPath,{type:n.file.type}),e.next=30,T(m,t.id);case 30:return p=e.sent,n=Object(u.a)({},n),e.abrupt("return",{file:m,metadata:p});case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e,t){return new Promise((function(n,a){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){var e=new Audio(r.result);e.preload="metadata",e.onloadedmetadata=function(){n({data:r.result,duration:e.duration,fileId:t})}},r.onerror=function(e){return a(e)}}))},G=function(e){var t=function(e){return e.filter((function(e){if("."!==e.name[0]&&e instanceof Blob)return e})).map((function(e){return{file:e,id:e.webkitRelativePath,fileName:e.name,relativePath:e.webkitRelativePath,type:e.type,metadata:T(e,e.webkitRelativePath)}}))}(e),n={};return t.forEach((function(e){n[e.id]=e})),n.rows=Object.values(n),n},H=function(e){return delete e.rows,e.rows=Object.values(e),e},z=function(){return r.a.createElement(f.a,{container:!0,justifyContent:"center",alignItems:"center",height:"100%"},r.a.createElement(m.a,{badgeContent:k.rows.length,color:"primary",max:9999},r.a.createElement(p.a,{variant:k.rows.length?"outlined":"contained",component:"label"},k.rows.length?"Reupload folder":"Upload folder",r.a.createElement("input",{type:"file",onChange:I,webkitdirectory:"",directory:!0,multiple:!0,hidden:!0}))),r.a.createElement(p.a,{onClick:U},"Encode Selected"))},$=Object(a.useState)(""),Q=Object(s.a)($,2),X=Q[0],Y=Q[1],Z=Object(a.useState)(""),_=Object(s.a)(Z,2),ee=_[0],te=_[1],ne=Object(a.useState)(""),ae=Object(s.a)(ne,2),re=ae[0],oe=ae[1],le=Object(a.useState)([{type:"argument",options:[{value:"-af silenceremove=1:0:-50dB:0:0:-1:0:-50dB",label:"yes"},{value:"",label:"no"}],label:"Remove silence",selected:"0"},{type:"argument",options:Object(o.a)(Array(10).keys()).map((function(e){return{value:"-q:a ".concat(e),label:"-q:a ".concat(e)}})),label:"Audio quality",selected:"0"},{type:"extension",options:[{value:".mp3",label:"mp3"},{value:".wav",label:"wav"},{value:".ogg",label:"ogg"}],label:"Output format",selected:"0"}]),ie=Object(s.a)(le,2),ce=ie[0],ue=ie[1];Object(a.useEffect)((function(){te(Object(o.a)(ce).filter((function(e){if("argument"==e.type)return e})).map((function(e){return e.options[parseInt(e.selected)].value})).join(" ")),oe(Object(o.a)(ce).filter((function(e){if("extension"==e.type)return e})).map((function(e){return e.options[parseInt(e.selected)]}))[0].value)}),[ce]);var se=function(){return r.a.createElement(f.a,{item:!0},ce.map((function(e,t){var n=e.options,a=e.label,l=e.selected;return r.a.createElement(f.a,{item:!0},r.a.createElement(q,{options:n,label:a,changeHandler:function(e){!function(e,t){var n=Object(o.a)(ce);n[t].selected=e.target.value,ue(n)}(e,t)},selected:l}))})))},de=Object(a.useMemo)((function(){return se}),[ce]);return r.a.createElement("div",{className:"App"},r.a.createElement(f.a,{container:!0,direction:"column",alignItems:"center",spacing:2},r.a.createElement(de,null),r.a.createElement(f.a,{item:!0},r.a.createElement(v.a,{onChange:function(e){Y(e.target.value)},id:"standard-basic",label:"your custom input",variant:"standard"})),r.a.createElement(f.a,{item:!0},r.a.createElement(z,null),r.a.createElement(p.a,{onClick:function(){var e=new V.a;k.rows.forEach((function(t){var n,a,r=(null===(n=t.processed)||void 0===n||null===(a=n.result)||void 0===a?void 0:a.file)||function(){};e.file(r.name,r)})),e.generateAsync({type:"blob"}).then((function(e){Object(K.saveAs)(e,"example.zip")}))}},"Download all processed files")),r.a.createElement(f.a,{item:!0,sx:{width:"100%"}},!!j&&r.a.createElement(b.a,{variant:"determinate",value:j}),r.a.createElement(B,{rows:k.rows,progress:h,onSelectionModelChange:function(e,t){console.log(e,t);var n={};e.forEach((function(e){n[e]=k[e]})),n.rows=Object.values(n),R(n)}}))))},X=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Y(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Z=n(188),_=document.getElementById("root");Object(Z.createRoot)(_).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Q,null))),function(e){if("serviceWorker"in navigator){if(new URL("/react-ffmpeg",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/react-ffmpeg","/service-worker.js");X?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Y(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Y(t,e)}))}}()}},[[216,1,2]]]);
//# sourceMappingURL=main.a841ff06.chunk.js.map